{
  "resourceType": "StructureMap",
  "url": "http://termx.health/fhir/StructureMap/test-02",
  "name": "test-02",
  "status": "draft",
  "group": [
    {
      "name": "main",
      "input": [
        {
          "name": "TLeft",
          "type": "TLeft",
          "mode": "source"
        },
        {
          "name": "TRight",
          "type": "TRight",
          "mode": "target"
        }
      ],
      "rule": [
        {
          "name": "rule_476",
          "source": [
            {
              "context": "TLeft"
            }
          ],
          "target": [
            {
              "variable": "a",
              "transform": "create",
              "parameter": [
                {
                  "valueString": "Meta"
                }
              ]
            },
            {
              "variable": "b",
              "transform": "evaluate",
              "parameter": [
                {
                  "valueId": "TLeft"
                },
                {
                  "valueString": "meta"
                }
              ]
            },
            {
              "variable": "c",
              "transform": "evaluate",
              "parameter": [
                {
                  "valueId": "b"
                },
                {
                  "valueString": "versionId"
                }
              ]
            },
            {
              "variable": "d",
              "transform": "evaluate",
              "parameter": [
                {
                  "valueId": "b"
                },
                {
                  "valueString": "security"
                }
              ]
            },
            {
              "variable": "e",
              "transform": "evaluate",
              "parameter": [
                {
                  "valueId": "b"
                },
                {
                  "valueString": "id"
                }
              ]
            },
            {
              "variable": "f",
              "transform": "evaluate",
              "parameter": [
                {
                  "valueId": "b"
                },
                {
                  "valueString": "code"
                }
              ]
            },
            {
              "transform": "append",
              "variable": "append#469",
              "parameter": [
                {
                  "valueId": "c"
                },
                {
                  "valueId": "f"
                }
              ]
            },
            {
              "context": "a",
              "element": "source",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "append#469"
                }
              ]
            },
            {
              "context": "a",
              "element": "id",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "e"
                }
              ]
            },
            {
              "context": "TRight",
              "element": "meta",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "a"
                }
              ]
            }
          ],
          "rule": []
        }
      ]
    }
  ],
  "extension": [
    {
      "url": "fml-export",
      "valueString": "{\"objects\":{\"TLeft\":{\"rawFields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"a1\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"a2\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"meta\",\"types\":[\"Meta\"],\"multiple\":false,\"required\":false,\"part\":false}],\"element\":{\"max\":\"1\",\"path\":\"TLeft\",\"id\":\"TLeft\",\"min\":1},\"resource\":\"TLeft\",\"url\":\"http://hl7.org/fhir/StructureDefinition/step3-left\",\"name\":\"TLeft\",\"mode\":\"source\",\"_nodeId\":1,\"position\":{\"x\":39,\"y\":59},\"fields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"a1\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"a2\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"meta\",\"types\":[\"Meta\"],\"multiple\":false,\"required\":false,\"part\":false}]},\"TRight\":{\"rawFields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b1\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b2\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b3\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"meta\",\"types\":[\"Meta\"],\"multiple\":false,\"required\":false,\"part\":false}],\"element\":{\"max\":\"1\",\"path\":\"TRight\",\"id\":\"TRight\",\"min\":1},\"resource\":\"TRight\",\"url\":\"http://hl7.org/fhir/StructureDefinition/step3-right\",\"name\":\"TRight\",\"mode\":\"target\",\"_nodeId\":2,\"position\":{\"x\":1090,\"y\":43},\"fields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b1\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b2\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"b3\",\"types\":[\"string\"],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"meta\",\"types\":[\"Meta\"],\"multiple\":false,\"required\":false,\"part\":false}]},\"TLeft.meta#463\":{\"rawFields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"versionId\",\"types\":[\"id\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"lastUpdated\",\"types\":[\"instant\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"source\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"profile\",\"types\":[\"canonical\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"security\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"tag\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false}],\"element\":{\"id\":\"Meta\",\"max\":\"*\",\"min\":0,\"base\":{\"max\":\"*\",\"min\":0,\"path\":\"Meta\"},\"path\":\"Meta\",\"short\":\"Metadata about a resource\",\"mapping\":[{\"map\":\"n/a,N/A\",\"identity\":\"rim\"}],\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"normative\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version\",\"valueCode\":\"4.0.0\"}],\"constraint\":[{\"key\":\"ele-1\",\"human\":\"All FHIR elements must have a @value or children\",\"source\":\"http://hl7.org/fhir/StructureDefinition/Element\",\"severity\":\"error\",\"expression\":\"hasValue() or (children().count() > id.count())\"}],\"definition\":\"The metadata about a resource. This is content in the resource that is maintained by the infrastructure. Changes to the content might not always be associated with version changes to the resource.\",\"isModifier\":false},\"resource\":\"Meta\",\"url\":\"http://hl7.org/fhir/StructureDefinition/Meta\",\"name\":\"TLeft.meta#463\",\"mode\":\"element\",\"_nodeId\":3,\"position\":{\"x\":167,\"y\":123},\"fields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"versionId\",\"types\":[\"id\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"lastUpdated\",\"types\":[\"instant\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"source\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"profile\",\"types\":[\"canonical\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"security\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"tag\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false}]},\"TRight.meta#465\":{\"rawFields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"versionId\",\"types\":[\"id\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"lastUpdated\",\"types\":[\"instant\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"source\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"profile\",\"types\":[\"canonical\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"security\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"tag\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false}],\"element\":{\"id\":\"Meta\",\"max\":\"*\",\"min\":0,\"base\":{\"max\":\"*\",\"min\":0,\"path\":\"Meta\"},\"path\":\"Meta\",\"short\":\"Metadata about a resource\",\"mapping\":[{\"map\":\"n/a,N/A\",\"identity\":\"rim\"}],\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"normative\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version\",\"valueCode\":\"4.0.0\"}],\"constraint\":[{\"key\":\"ele-1\",\"human\":\"All FHIR elements must have a @value or children\",\"source\":\"http://hl7.org/fhir/StructureDefinition/Element\",\"severity\":\"error\",\"expression\":\"hasValue() or (children().count() > id.count())\"}],\"definition\":\"The metadata about a resource. This is content in the resource that is maintained by the infrastructure. Changes to the content might not always be associated with version changes to the resource.\",\"isModifier\":false},\"resource\":\"Meta\",\"url\":\"http://hl7.org/fhir/StructureDefinition/Meta\",\"name\":\"TRight.meta#465\",\"mode\":\"object\",\"_nodeId\":4,\"position\":{\"x\":946,\"y\":126},\"fields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"versionId\",\"types\":[\"id\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"lastUpdated\",\"types\":[\"instant\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"source\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"profile\",\"types\":[\"canonical\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"security\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"tag\",\"types\":[\"Coding\"],\"multiple\":true,\"required\":false,\"part\":false}]},\"TLeft.meta#463.security#467\":{\"rawFields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"system\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"version\",\"types\":[\"string\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"code\",\"types\":[\"code\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"display\",\"types\":[\"string\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"userSelected\",\"types\":[\"boolean\"],\"multiple\":false,\"required\":false,\"part\":false}],\"element\":{\"id\":\"Coding\",\"extension\":[{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status\",\"valueCode\":\"normative\"},{\"url\":\"http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version\",\"valueCode\":\"4.0.0\"}],\"path\":\"Coding\",\"short\":\"A reference to a code defined by a terminology system\",\"definition\":\"A reference to a code defined by a terminology system.\",\"comment\":\"Codes may be defined very casually in enumerations or code lists, up to very formal definitions such as SNOMED CT - see the HL7 v3 Core Principles for more information.\",\"min\":0,\"max\":\"*\",\"base\":{\"path\":\"Coding\",\"min\":0,\"max\":\"*\"},\"constraint\":[{\"key\":\"cod-1\",\"severity\":\"warning\",\"human\":\"A Coding SHOULD NOT have a display unless a code is also present.  Computation on Coding.display alone is generally unsafe.  Consider using CodeableConcept.text\",\"expression\":\"code.exists().not() implies display.exists().not()\",\"source\":\"http://hl7.org/fhir/StructureDefinition/Coding\"},{\"key\":\"ele-1\",\"severity\":\"error\",\"human\":\"All FHIR elements must have a @value or children\",\"expression\":\"hasValue() or (children().count() > id.count())\",\"source\":\"http://hl7.org/fhir/StructureDefinition/Element\"}],\"isModifier\":false,\"mapping\":[{\"identity\":\"rim\",\"map\":\"n/a,CV\"},{\"identity\":\"v2\",\"map\":\"CE/CNE/CWE subset one of the sets of component 1-3 or 4-6\"},{\"identity\":\"orim\",\"map\":\"fhir:Coding rdfs:subClassOf dt:CDCoding\"}]},\"resource\":\"Coding\",\"url\":\"http://hl7.org/fhir/StructureDefinition/Coding\",\"name\":\"TLeft.meta#463.security#467\",\"mode\":\"element\",\"_nodeId\":5,\"position\":{\"x\":375,\"y\":349},\"fields\":[{\"name\":\"$this\",\"types\":[],\"multiple\":false,\"required\":true,\"part\":false},{\"name\":\"id\",\"types\":[\"http://hl7.org/fhirpath/System.String\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"extension\",\"types\":[\"Extension\"],\"multiple\":true,\"required\":false,\"part\":false},{\"name\":\"system\",\"types\":[\"uri\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"version\",\"types\":[\"string\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"code\",\"types\":[\"code\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"display\",\"types\":[\"string\"],\"multiple\":false,\"required\":false,\"part\":false},{\"name\":\"userSelected\",\"types\":[\"boolean\"],\"multiple\":false,\"required\":false,\"part\":false}]}},\"rules\":[{\"name\":\"append#469\",\"action\":\"append\",\"parameters\":[{\"type\":\"var\",\"value\":\"TLeft.meta#463.versionId\"},{\"type\":\"var\",\"value\":\"TLeft.meta#463.security#467.code\"}],\"position\":{\"x\":603,\"y\":303},\"_nodeId\":6}],\"connections\":[{\"sourceObject\":\"TLeft\",\"sourceFieldIdx\":3,\"targetObject\":\"TLeft.meta#463\",\"targetFieldIdx\":0},{\"sourceObject\":\"TRight.meta#465\",\"sourceFieldIdx\":0,\"targetObject\":\"TRight\",\"targetFieldIdx\":4},{\"sourceObject\":\"TLeft.meta#463\",\"sourceFieldIdx\":7,\"targetObject\":\"TLeft.meta#463.security#467\",\"targetFieldIdx\":0},{\"sourceObject\":\"append#469\",\"sourceFieldIdx\":0,\"targetObject\":\"TRight.meta#465\",\"targetFieldIdx\":5},{\"sourceObject\":\"TLeft.meta#463\",\"sourceFieldIdx\":3,\"targetObject\":\"append#469\",\"targetFieldIdx\":0},{\"sourceObject\":\"TLeft.meta#463.security#467\",\"sourceFieldIdx\":5,\"targetObject\":\"append#469\",\"targetFieldIdx\":1},{\"sourceObject\":\"TLeft.meta#463\",\"sourceFieldIdx\":1,\"targetObject\":\"TRight.meta#465\",\"targetFieldIdx\":1}]}"
    }
  ],
  "structure": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/step3-left",
      "mode": "source",
      "alias": "TLeft"
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/step3-right",
      "mode": "target",
      "alias": "TRight"
    }
  ]
}
